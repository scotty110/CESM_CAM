RUN ./configure --prefix=$BLAS_PATH && \
    make -j $(nproc) && \
    make install

ENV LD_LIBRARY_PATH $LD_LIBRARY_PATH:$BLAS_PATH/lib

# Install LAPACK
# Install Older Version of LAPACK
# https://www.netlib.org/lapack/#_lapack_version_3_12_0
WORKDIR /opt
RUN wget https://github.com/Reference-LAPACK/lapack/archive/refs/tags/v3.12.0.tar.gz && \
    tar -xzvf lapack-3.5.12.tgz && \
    rm lapack-3.12.0.tgz && \
    mv lapack-3.12.0 lapack 

WORKDIR /opt/lapack
RUN mkdir build
ENV LAPACK_PATH /usr/local/lapack
RUN ./configure --prefix=$LAPACK_PATH && \
    make -j $(nproc) && \
    make install

ENV LD_LIBRARY_PATH $LD_LIBRARY_PATH:$LAPACK_PATH/lib